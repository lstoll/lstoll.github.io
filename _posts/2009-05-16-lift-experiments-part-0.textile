---
layout: post
title: Experiments with lift and scala, part 0 - setting up
---

h1. {{ page.title }}

p(meta). 16/04/2009 - Buchs, Switzerland

I've decided it's finally time to sit down and do some experimentation with <a href="http://liftweb.net/">lift</a>, a <a href="http://www.scala-lang.org/">scala</a> web framework. I've been using scala for a few small projects, and it's a language I really like so I figured I should take it to the next level, and try out a web app. The app will be a simple URL shortener, with some admin and tracking added later. I'm also planning on eventually running this app on Google App Engine, so that should make things a little more interesting.

Firstly, we need to get an environment up and running to develop with. I'll assume you are using Mac OS X - if not, you will need to taylor to suit.

h2. Basic Pre-requisites

You will need to have macports and Netbeans installed on your system. If by some chance you don't already have macports installed on your machine, you can find at at <a href="http://www.macports.org/">http://www.macports.org/</a>. I'm working with Netbeans 6.7 beta - it can be downloaded from <a href="http://download.netbeans.org/netbeans/6.7/beta/">http://download.netbeans.org/netbeans/6.7/beta/</a>

h2. Install scala and maven

OS X Ships with a copy of maven, but I prefer to use the macports version as it is generally newer, and updated more regulary. To install it, along with scala run

<pre class="brush: bash">
  sudo port install maven2 scala
</pre>

h2. Netbeans Setup

You will need to add the nightly development builds update center is setup, and install it from there. Fire up Netbeans. Open up the tools menu, and select plugins. Select the settings tab, Click Add, and add an entry called "Last Development Build" pointing to http://deadlock.netbeans.org/hudson/job/nbms-and-javadoc/lastStableBuild/artifact/nbbuild/nbms/updates.xml.gz

<img width="600" src="http://static.lstoll.net/skitch/System-20090516-003007.jpg" />

Go to the Available Plugins tab, search for scala, select scala kit and click install.

<img width="600" src="http://static.lstoll.net/skitch/System-20090516-003323.jpg" />

Once this is done, you will need to restart Netbeans.

You will also need to set Netbeans to use the Macports version of Maven. Open Netbeans/Preferences, Switch to Miscellaneous, and select the Maven tab. Browse for the external Maven home, and navigate to /opt/local/share/java, then select the maven2 folder and click open. Then OK the preferences dialog.

h2. Create a test project

We should be set up to go. Fire up a Terminal, navigate to the folder you want to create the project in, and run the following command:

<pre class="brush: bash">
  mvn archetype:generate -U \
  -DarchetypeGroupId=net.liftweb \
  -DarchetypeArtifactId=lift-archetype-basic \
  -DarchetypeVersion=1.0 \
  -DremoteRepositories=http://scala-tools.org/repo-releases \
  -DgroupId=net.lstoll.u \
  -DartifactId=u.lstoll.net \
  -Dversion=0.1-SNAPSHOT
</pre>

This will create an application in the folder u.lstoll.net, with a package of net.lstoll.u . Why these names? Well, that's the site where I'm going to run the application. Feel free to change it to whatever you want. It will take a while to download everything.

h2. Open the project in netbeans, and test.

Switch back to Netbeans, then select File/Open Project. Navigate to the app we just created, and open it.

Before we can run it, we need to change a few project settings. Right click on the project, and select properties. In the run section, select any server you have in Netbeans. It doesn't matter which you select, as it will never be started. In the actions section, make sure 'Use external Maven for build execution' is selected, and change the Execute Goals for the Run Project and Debug Project to 'jetty:run'

<img width="600" src="http://static.lstoll.net/skitch/NetBeans-20090516-013212.jpg" />

Once this is done, you can get out of the properties dialog. Click the run button, and wait for the output to show that it is running. Fire up a browser and navigate to http://127.0.0.1:8080 - you should see the default application home!

To stop the application, just click the red stop button in the output Window.

<img width="600" src="http://static.lstoll.net/skitch/u.lstoll.net_%28war%29_-_NetBeans_IDE_6.7_Beta-20090516-013413.jpg" />

Note: The run integration isn't the best at the moment - Netbeans doesn't detect the webapp as running properly. This is something I'll look into later, but for now the basics work.

That's it for part 0. In part 1, we will code the basic application.

You can find the code for this application at http://github.com/lstoll/u.lstoll.net